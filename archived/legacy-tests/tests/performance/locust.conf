# Locust配置文件
# 智股通性能测试配置

[locust]
# 基础设置
host = http://localhost:8000
users = 100
spawn-rate = 10
run-time = 300
expect-workers = 4

# HTTP设置
master-host = localhost
master-port = 5557
master-bind-host = *

# 日志设置
loglevel = INFO
logfile = locust_performance.log
log-file-level = INFO

# 统计设置
csv = performance_stats
print-stats = true
only-summary = false

# 浏览器界面
web-host = 127.0.0.1
web-port = 8089

[性能测试配置]

[baseline-test]
# 基准测试 - 小负载验证基本功能
users = 10
spawn-rate = 2
run-time = 60
user_classes = StockInsiderUser

[load-test]
# 负载测试 - 中等负载
users = 50
spawn-rate = 5
run-time = 180
user_classes = StockInsiderUser,MobileUser
ratio = 0.8,0.2

[stress-test]
# 压力测试 - 高负载
users = 200
spawn-rate = 20
run-time = 300
user_classes = StockInsiderUser,PowerUser,MobileUser
ratio = 0.6,0.3,0.1

[soak-test]
# 浸泡测试 - 长时间稳定运行
users = 30
spawn-rate = 3
run-time = 1800
user_classes = StockInsiderUser
reset-stats = true

[spike-test]
# 峰值测试 - 突发流量
users = 5
spawn-rate = 1
run-time = 60
user_classes = StockInsiderUser

# 突发到高负载
spike-users = 300
spike-spawn-rate = 50
spike-duration = 60
spike-wait = 30

[配置文件路径]
locustfile = locustfile.py
csv-prefix = results/
html-report = reports/

[高级配置]

# 网络设置
request-timeout = 30
max-retries = 3
retry-delay = 1

# 统计报告
percentiles-to-report = 0.5, 0.75, 0.9, 0.95, 0.99
stats-report-width = 150

# 资源限制
max-failures = 1000
max-rps = 1000

[环境特定配置]

[development]
host = http://localhost:8000
users = 10
run-time = 60
loglevel = DEBUG

[staging]
host = http://staging.smartstockinsider.com
users = 50
run-time = 300
loglevel = INFO

[production]
host = https://api.smartstockinsider.com
users = 100
run-time = 600
loglevel = WARNING
# 生产环境使用HTTPS证书
verify-https = true